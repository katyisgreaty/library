@{
    Layout="Shared/_Layout.cshtml";
}

<h2>@Model["Patron"].GetName()</h2>
<p>Phone: @Model["Patron"].GetPhone()</p>

<h4>Books Checked Out:</h4>

@if(Model["Patron Checkouts"].Count != 0)
{
    @foreach(var checkout in Model["Patron Checkouts"])
    {
        <p>Book: <a href="/book/@checkout.GetBookId()">@checkout.GetBookName()</a></p>
        <p>Due Date: @checkout.GetDueDate()</p>
        <form class="" action="/patron/@Model["Patron"].GetId()/return/@checkout.GetId()" method="post">
            <button type="submit" name="button">Return</button>
        </form>
        <hr/>
    }
}

<div class="checkout">
    <form class="" action="/patron/@Model["Patron"].GetId()" method="post">
        <select name="booklist">
            <option value="0" disabled selected>Pick a book to checkout</option>
            @if(Model["Books"].Count != 0)
            {
                @foreach(var book in Model["Books"])
                {
                    @if(@book.GetCopies() >= 1)
                    {
                        <option value="@book.GetId()">@book.GetName()</option>
                    }
                }
            }
        </select>
        <label for="due-date"></label>
        <input id="due-date" type="date" name="due-date">
        <button type="submit" name="button">Checkout</button>
    </form>
</div>

<hr>


<div class="update-patron">
    <form class="" action="/patron/@Model["Patron"].GetId()" method="post">
        <input type="hidden" name="_method" value="PATCH">
        <input type="text" name="new-name" value="@Model["Patron"].GetName()">
        <input type="text" name="new-phone" value="@Model["Patron"].GetPhone()">
        <button type="submit" name="button">Update Patron</button>
    </form>
</div>
