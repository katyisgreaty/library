@{
    Layout="Shared/_Layout.cshtml";
}

<h2>@Model["Author"].GetName()</h2>
@if(Model["Author"].GetBooks().Count != 0)
{
    <p>Books by @Model["Author"].GetName():</p>
    foreach(var book in Model["Author"].GetBooks())
    {
        <p><a href="/book/@book.GetId()">@book.GetName()</a></p>
        <hr/>
    }
}
else
{
    <p>There are no books associated with this author yet</p>
}

<div class="input-field">
    <form class="" action="/author/@Model["Author"].GetId()" method="post">
        <select name="book-id">
            <option value="" disabled selected>Add a book to this author</option>
            @foreach(var book in Model["Books"])
            {
                <option value="@book.GetId()">@book.GetName()</option>
            }
        </select>
        <button type="submit" name="button">Add Book</button>
    </form>
</div>

<div class="update-author">
    <form class="" action="/author/@Model["Author"].GetId()" method="post">
        <input type="hidden" name="_method" value="PATCH">
        <input type="text" name="new-name" value="@Model["Author"].GetName()">
        <button type="submit" name="button">Update Author</button>
    </form>
</div>
